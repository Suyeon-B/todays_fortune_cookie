<!Doctype html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

    <!-- êµ¬ê¸€í°íŠ¸ -->
    <link href="https://fonts.googleapis.com/css?family=Stylish&display=swap" rel="stylesheet">


    <title>ì˜¤ëŠ˜ì˜ í¬ì¶˜ì¿ í‚¤ğŸ¥  </title>

    <!-- style -->
    <style type="text/css">
        /* * {
            font-family: "Stylish", sans-serif;
        }

        .wrap {
            width: 900px;
            margin: auto;
        }

        .card-title {
            font-size: larger;
        }

        #post-box {
            width: 500px;
        }

        .badge-secondary {
            margin-left: 15px;
            margin-bottom: 10px;
        }

        .save {
            margin-top: 10px;
        } */

    </style>
    <!-- <script>
        $(document).ready(function () {
            showMemos();
        });

        // ì‚¬ìš©ìì—ê²Œ ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥ë°›ì•„ ë©”ëª¨ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        function postMemo() {
            let title = $("#memo-title").val();
            let comment = $("#memo-content").val();

            $.ajax({
                type: "POST", 
                url: "/memo/post", 
                data: { title_give: title, comment_give: comment }, 
                success: function (response) { 
                    if (response["result"] == "success") {
                        alert("ì €ì¥ ì™„ë£Œ!");
                        window.location.reload();
                    } else {
                        alert("ì„œë²„ ì˜¤ë¥˜!")
                    }
                }
            })
        }

        // í˜ì´ì§€ê°€ ìƒˆë¡œê³ ì¹¨ë  ë•Œ ë§ˆë‹¤ ê¸°ì¡´ì˜ ë©”ëª¨ë“¤ì„ ëª¨ë‘ ë¹„ìš°ê³ ,
        // ì—…ë°ì´íŠ¸ëœ DB ë°ì´í„°ë¡œ ì¹´ë“œë“¤ì„ ë§Œë“¤ì–´ ë„ì›ë‹ˆë‹¤.
        function showMemos() {
            $("#card-list").empty()
            $.ajax({
                type: "GET",
                url: "/memo/show",
                data: {},
                success: function (response) {
                    let memos = response["memos"];
                    for (let i = 0; i < memos.length; i++) {
                        makeCard(memos[i]["title"], memos[i]["comment"], memos[i]['_id']);
                    }
                }
            })
        }

        // ìƒˆë¡œ ë©”ëª¨ë¥¼ ì…ë ¥ë°›ì„ ë•Œ,
        // showMemos í•¨ìˆ˜ì—ì„œ ì¹´ë“œë¥¼ ë§Œë“¤ì–´ ì¶”ê°€í•˜ëŠ” ë¶€ë¶„ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
        // ì‚¬ìš©ìê°€ ì…ë ¥í•œ title, commentì™€ DB ê³ ìœ ì˜ '_id'ê°’ìœ¼ë¡œ
        // idë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤.
        function makeCard(title, comment, _id) {
            let tempHtml = `<div class="card" id="memo_id_${_id}">
                                <div class="card-body">
                                    <p class="card-title" id="memo_title">${title}</p>
                                    <p class="card-text comment" id="memo_comment">${comment}</p>
                                    <button onclick="editMemo('${_id}')" type="button" class="btn btn-secondary">ìˆ˜ì •</button>
                                    <button onclick="deleteMemo('${_id}')" type="button" class="btn btn-dark">ì‚­ì œ</button>
                                </div>
                            </div>
                            <div class="card" id="memo_id_edit_${_id}" style="display:none">
                                <div class="card-body">
                                    <input class="form-control new-title"  id="memo_title_edit_${_id}" value="${title}">
                                    <textarea class="form-control new-text" rows="2" id="memo_comment_edit_${_id}">${comment}</textarea>
                                    <button onclick="editMemo_save('${_id}')" type="button" class="btn btn-secondary save">ì €ì¥</button>
                                </div>
                            </div>`;
            $("#card-list").append(tempHtml);
        }

        // ë©”ëª¨ ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì¼ë°˜ì ì¸ ë©”ëª¨ëŠ” hide,
        // ìˆ˜ì •í•˜ëŠ” ë¶€ë¶„ì„ show
        function editMemo(_id) {
            $("#memo_id_" + _id).hide();
            $("#memo_id_edit_" + _id).show();
        }

        // ë©”ëª¨ ìˆ˜ì • í›„ ì €ì¥í•˜ëŠ” ë¶€ë¶„ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
        // ì‚¬ìš©ìì—ê²Œ ì…ë ¥ë°›ì€ titleê³¼ commentê°’ì„ ë³€ìˆ˜ì— ë‹´ì•„
        // idê°’ê³¼ í•¨ê»˜ ì „ë‹¬í•©ë‹ˆë‹¤.
        function editMemo_save(_id) {
            let new_title = $("#memo_title_edit_" + _id).val();
            let new_comment = $("#memo_comment_edit_" + _id).val();

            $.ajax({
                type: "POST",
                url: "/memo/edit",
                data: { 
                    'new_title_give': new_title, 
                    'new_comment_give': new_comment,
                    'id_give' : _id
                },
                success: function (response) {
                    if (response['result'] == 'success'){
                        alert("ìˆ˜ì • ì™„ë£Œ!")
                        window.location.reload()
                    } 
                }
            })
        }

        // ë©”ëª¨ ì‚­ì œ ë¶€ë¶„ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
        // ì‚¬ìš©ìê°€ ì‚­ì œ ë²„íŠ¼ì„ ëˆ„ë¥¸ ë©”ëª¨ì˜ idê°’ì„ ì „ë‹¬í•´, 
        // í•´ë‹¹í•˜ëŠ” ë©”ëª¨ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
        function deleteMemo(_id) {
            $.ajax({
                type: 'POST',
                url: '/memo/delete',
                data: { 'id_give' : _id },
                success: function (response) {
                    if (response['result'] == 'success') {
                        alert("ì‚­ì œ ì™„ë£Œ!")
                        window.location.reload();
                    } else {
                        alert("ì„œë²„ ì˜¤ë¥˜!")
                    }
                }
            });
        }

    </script> -->

</head>

<body>
    <button type="button" class="play_btn" onClick="location.href='/'">home</button>
    <button type="button" class="play_btn" onClick="location.href='/login'">ë¡œê·¸ì¸ ë²„íŠ¼ ìë¦¬</button>
    <button type="button" class="play_btn" onClick="location.href='/signIn'">íšŒì›ê°€ì… ë²„íŠ¼ ìë¦¬</button>
    <!-- <div class="wrap">
        <div class="jumbotron">
            <h1 class="display-4">ë‚˜í™€ë¡œë©”ëª¨ì¥<span class="badge badge-secondary">ver2.0</span></h1>
            <div id="post-box" class="form-post">
                <div>
                    <div class="form-group">
                        <input id="memo-title" class="form-control" placeholder="ë©”ëª¨ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”.">
                    </div>
                    <div class="form-group">
                        <textarea id="memo-content" class="form-control" rows="2" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" onclick="postMemo()">ì €ì¥í•˜ê¸°</button>
                </div>
            </div>
        </div>
        <div id="card-list" class="card-columns">
            <div class="card" id="memo_id">
                <div class="card-body">
                    <p class="card-title">ì œëª©</p>
                    <p class="card-text comment">ë‚´ìš©</p>
                    <button id="btn-change" onclick="editMemo()" type="button" class="btn btn-secondary">ìˆ˜ì •</button>
                    <button onclick="deleteMemo()" type="button" class="btn btn-dark">ì‚­ì œ</button>
                </div>
            </div>
        </div>
    </div>
</body> -->

</html>