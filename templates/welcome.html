<!Doctype html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>

    <!-- 구글폰트 -->
    <link href="https://fonts.googleapis.com/css?family=Stylish&display=swap" rel="stylesheet">


    <title>오늘의 포춘쿠키🥠 </title>

    <!-- style -->
    <style type="text/css">
        /* * {
            font-family: "Stylish", sans-serif;
        }

        .wrap {
            width: 900px;
            margin: auto;
        }

        .card-title {
            font-size: larger;
        }

        #post-box {
            width: 500px;
        }

        .badge-secondary {
            margin-left: 15px;
            margin-bottom: 10px;
        }

        .save {
            margin-top: 10px;
        } */

    </style>
    <!-- <script>
        $(document).ready(function () {
            showMemos();
        });

        // 사용자에게 제목과 내용을 입력받아 메모를 생성합니다.
        function postMemo() {
            let title = $("#memo-title").val();
            let comment = $("#memo-content").val();

            $.ajax({
                type: "POST", 
                url: "/memo/post", 
                data: { title_give: title, comment_give: comment }, 
                success: function (response) { 
                    if (response["result"] == "success") {
                        alert("저장 완료!");
                        window.location.reload();
                    } else {
                        alert("서버 오류!")
                    }
                }
            })
        }

        // 페이지가 새로고침될 때 마다 기존의 메모들을 모두 비우고,
        // 업데이트된 DB 데이터로 카드들을 만들어 띄웁니다.
        function showMemos() {
            $("#card-list").empty()
            $.ajax({
                type: "GET",
                url: "/memo/show",
                data: {},
                success: function (response) {
                    let memos = response["memos"];
                    for (let i = 0; i < memos.length; i++) {
                        makeCard(memos[i]["title"], memos[i]["comment"], memos[i]['_id']);
                    }
                }
            })
        }

        // 새로 메모를 입력받을 때,
        // showMemos 함수에서 카드를 만들어 추가하는 부분을 담당합니다.
        // 사용자가 입력한 title, comment와 DB 고유의 '_id'값으로
        // id를 설정해줍니다.
        function makeCard(title, comment, _id) {
            let tempHtml = `<div class="card" id="memo_id_${_id}">
                                <div class="card-body">
                                    <p class="card-title" id="memo_title">${title}</p>
                                    <p class="card-text comment" id="memo_comment">${comment}</p>
                                    <button onclick="editMemo('${_id}')" type="button" class="btn btn-secondary">수정</button>
                                    <button onclick="deleteMemo('${_id}')" type="button" class="btn btn-dark">삭제</button>
                                </div>
                            </div>
                            <div class="card" id="memo_id_edit_${_id}" style="display:none">
                                <div class="card-body">
                                    <input class="form-control new-title"  id="memo_title_edit_${_id}" value="${title}">
                                    <textarea class="form-control new-text" rows="2" id="memo_comment_edit_${_id}">${comment}</textarea>
                                    <button onclick="editMemo_save('${_id}')" type="button" class="btn btn-secondary save">저장</button>
                                </div>
                            </div>`;
            $("#card-list").append(tempHtml);
        }

        // 메모 수정 버튼을 누르면 일반적인 메모는 hide,
        // 수정하는 부분을 show
        function editMemo(_id) {
            $("#memo_id_" + _id).hide();
            $("#memo_id_edit_" + _id).show();
        }

        // 메모 수정 후 저장하는 부분을 담당합니다.
        // 사용자에게 입력받은 title과 comment값을 변수에 담아
        // id값과 함께 전달합니다.
        function editMemo_save(_id) {
            let new_title = $("#memo_title_edit_" + _id).val();
            let new_comment = $("#memo_comment_edit_" + _id).val();

            $.ajax({
                type: "POST",
                url: "/memo/edit",
                data: { 
                    'new_title_give': new_title, 
                    'new_comment_give': new_comment,
                    'id_give' : _id
                },
                success: function (response) {
                    if (response['result'] == 'success'){
                        alert("수정 완료!")
                        window.location.reload()
                    } 
                }
            })
        }

        // 메모 삭제 부분을 담당합니다.
        // 사용자가 삭제 버튼을 누른 메모의 id값을 전달해, 
        // 해당하는 메모를 삭제합니다.
        function deleteMemo(_id) {
            $.ajax({
                type: 'POST',
                url: '/memo/delete',
                data: { 'id_give' : _id },
                success: function (response) {
                    if (response['result'] == 'success') {
                        alert("삭제 완료!")
                        window.location.reload();
                    } else {
                        alert("서버 오류!")
                    }
                }
            });
        }

    </script> -->

</head>

<body>
    <button type="button" class="play_btn" onClick="location.href='/'">home</button>
    <button type="button" class="play_btn" onClick="location.href='/login'">로그인 버튼 자리</button>
    <button type="button" class="play_btn" onClick="location.href='/signIn'">회원가입 버튼 자리</button>
    <!-- <div class="wrap">
        <div class="jumbotron">
            <h1 class="display-4">나홀로메모장<span class="badge badge-secondary">ver2.0</span></h1>
            <div id="post-box" class="form-post">
                <div>
                    <div class="form-group">
                        <input id="memo-title" class="form-control" placeholder="메모 제목을 입력하세요.">
                    </div>
                    <div class="form-group">
                        <textarea id="memo-content" class="form-control" rows="2" placeholder="내용을 입력하세요."></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" onclick="postMemo()">저장하기</button>
                </div>
            </div>
        </div>
        <div id="card-list" class="card-columns">
            <div class="card" id="memo_id">
                <div class="card-body">
                    <p class="card-title">제목</p>
                    <p class="card-text comment">내용</p>
                    <button id="btn-change" onclick="editMemo()" type="button" class="btn btn-secondary">수정</button>
                    <button onclick="deleteMemo()" type="button" class="btn btn-dark">삭제</button>
                </div>
            </div>
        </div>
    </div>
</body> -->

</html>